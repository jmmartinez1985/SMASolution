@model IEnumerable<SMAWeb.Models.AnunciosViewModel>

@{
    ViewBag.Title = "Index";
}

<link href="@Url.Content("~/Content/jpages/jPages.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/jpages/animate.css")" rel="stylesheet" type="text/css" />
@*<link href="@Url.Content("~/Content/jpages/style.css")" rel="stylesheet" type="text/css" />*@
<script src="@Url.Content("~/Scripts/jpage/jPages.min.js")" type="text/javascript"></script>







<div class="container">
    <div class="row-fluid purchase">
        <span>Búsqueda de Servicios</span>
        <div class="form-inline">
            <div class="input-append">
                <input id="txtSearchHome" class="input-xxlarge" type="text" placeholder="Buscar en la página">
                <button type="submit" class="btn btn-u"><i class="icon-search icon-white"></i></button>
            </div>
            <a href="#advanced" role="button" data-toggle="modal" class="btn btn-u btn-large">Búsqueda Avanzada</a>
        </div>

    </div>

    <br />
    <div class="row-fluid margin-bottom-10">

        <div class="another-page">
            <div class="headline">
                <h3>Mis Anuncios Publicados</h3>
            </div>

            <div style="width: 100%">
                <table class="table-hover">
                    <thead>
                    </thead>
                    <tbody id="anunciosAvailable">
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    <div class="row-fluid">
                                        <div class="span12 booking-blocks">
                                            <!--   -->
                                            <div class="pull-left booking-img">
                                                <!--   -->
                                                <img src="@item.FirstImage" alt="@item.Usuario">
                                                <!-- Nombre del Anunciante  -->
                                                <ul class="unstyled">
                                                    <li><i class="icon-briefcase"></i>@item.CategoriaDescripcion</li>
                                                    <!-- Categorias  -->
                                                    <li><i class="icon-map-marker"></i>@item.AnunciosInfo.AN_Area</li>
                                                    <!-- Lugar del anuncio, agregar campo a la base de datos  -->
                                                    <li>
                                                        <ul class="unstyled inline">
                                                            <!-- Calculado basado Review basado en 5  -->
                                                            <li><i class="icon-star"></i></li>
                                                            <li><i class="icon-star"></i></li>
                                                            <li><i class="icon-star"></i></li>
                                                            <li><i class="icon-star"></i></li>
                                                            <li><i class="icon-star-empty"></i></li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div style="overflow: hidden;">
                                                <h2><a href="#">@item.AnunciosInfo.AN_Titulo</a></h2>
                                                <!-- Titulo Anuncio  -->

                                                <p>@item.AnunciosInfo.AN_Descripcion</p>
                                                <!-- Descripcion de anuncio, basado en 200 caracteres -->
                                                <button class="btn-u btn-u-orange">Leer Más</button>
                                                <!-- Nombre del Anunciante  -->
                                                <button class="btn-u btn-u-orange">Editar</button> 
                                                <button class="btn-u btn-u-orange">Eliminar</button>
                                                <button class="btn-u btn-u-orange">Desactivar</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
           
                        }
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="1">
                                <div class="holder" style="float: left">
                                </div>
                            </td>
                        </tr>
                    </tfoot>

                </table>
            </div>
        </div>
    </div>


</div>

<div id="advanced" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="advancedSort" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <ul class="nav nav-pills pull-right">
            <li class="active">
                <a href="#date" data-toggle="pill">Date</a>
            </li>
            <li><a href="#relevance" data-toggle="pill">Relevance</a></li>
            <li><a href="#dealership" data-toggle="pill">Dealership</a></li>
        </ul>
        <h4>Advanced Sort</h4>
    </div>
    <div class="modal-body">
        <div class="row-fluid">
            <div class="tab-content">
                <div class="tab-pane active" id="date">
                    <form>
                        <div class="controls controls-row">
                            <select>
                                <option>Date</option>
                                <option>Today</option>
                                <option>Yesterday</option>
                                <option>Last Week</option>
                                <option>Last Month</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-warning">Sort</button>
                    </form>
                </div>
                <div class="tab-pane" id="relevance">
                    <form>

                        <div class="controls controls-row">
                            <select class="span6">
                                <option value="">Relevance Factor</option>
                                <option value="">Containing</option>
                                <option value="">Starting with</option>
                                <option value="">Enging with</option>
                            </select>
                            <select class="span6">
                                <option value="">Sorting</option>
                                <option value="">Relevant on top</option>
                                <option value="">Relevant on bottom</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-warning">Sort</button>

                    </form>
                </div>
                <div class="tab-pane" id="dealership">
                    <form>

                        <div class="controls controls-row">
                            <input type="text" class="span8" placeholder="Location">
                            <select class="span4">
                                <option>City</option>
                                <option>Los Angeles</option>
                                <option>Tokyo</option>
                                <option>New York</option>
                                <option>London</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-warning">Sort</button>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="divNoAnunciosFound" class="bold large span12" style="padding: 5px; display: none;">
    No se obtuvieron resultados.
</div>

<script>



    var $jpage = jQuery.noConflict();
    $jpage(function () {
        $jpage("div.holder").jPages({
            containerID: "anunciosAvailable",
            //              previous: "←",
            //              next: "→",
            first: "Primera",
            previous: "Anterior",
            next: "Siguiente",
            last: "Última",
            perPage: 5,
            delay: 20
        });
    });
    jQuery(document).ready(function () {

        jQuery('#txtSearchHome').keyup(function () {
            debugger;
            var text = jQuery('#txtSearchHome').val();
            var rows = jQuery('#anunciosAvailable > tr');

            rows.each(function (idx, elem) {
                var rowText = $(elem).text().toLowerCase();
                if (rowText.indexOf(text.toLowerCase()) < 0) {
                    jQuery(elem).hide();
                }
                else {
                    jQuery(elem).show();
                }
            });
            setTimeout('CheckVisibleProjects();', 300);
        });


    });
    function CheckVisibleProjects() {
        var rows = jQuery('#anunciosAvailable > tr');
        if (rows.filter(':hidden').size() == rows.length) {
            jQuery('#divNoAnunciosFound').fadeIn(1000);
        }
        else {
            jQuery('#divNoAnunciosFound').hide();
        }
    }

</script>
